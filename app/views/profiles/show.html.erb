<% content_for :header do %>
  Profile <%=h @profile.name %>
<% end %>
<% add_action 'Add', new_profile_path %>
<% add_action 'Edit', edit_profile_path(@profile) %>

<section>
<h3>General info</h3>

<p>
These are the settings of the <b><%=h @profile.name %></b> profile. Using profiles you can finetune the backup process using predefined settings.
</p>
</section>

<section id="excludes">
<h3>Excludes</h3>
<p>The following directories will be excluded from the backups. Wildcards are allowed.</p>
<ul>
  <% @profile.excludes.each do | exclude | %>
    <li><%=h exclude.path %> (<%= link_to 'Edit', edit_profile_exclude_path(@profile, exclude) %> | <%= link_to 'Destroy', [@profile, exclude], :confirm => 'Are you sure?', :method => :delete %>)</li>
  <% end %>
</ul>
<h3>Add exclude</h3>
<% @exclude = @profile.excludes.build %>
<%= render :partial => 'excludes/form' %>
</section>

<section id="includes">
<h3>Includes</h3>
<p>The following directories will be included in the backups, even if there is a matching exclude rule. Wildcards are allowed.</p>
<ul>
  <% @profile.includes.each do | include | %>
    <li><%=h include.path %> (<%= link_to 'Edit', edit_profile_include_path(@profile, include) %> | <%= link_to 'Destroy', [@profile, include], :confirm => 'Are you sure?', :method => :delete %>)</li>
  <% end %>
</ul>
<h3>Add include</h3>
<% @include = @profile.includes.build %>
<%= render :partial => 'includes/form' %>
</section>

<section id="splits">
<h3>Splits</h3>
<p>The following directories will be split in rsyncs for A-Z, a-z and 0-9. This increases performance for very large directories. Files and directories starting with other characters will not be backupped!</p>
<ul>
  <% @profile.splits.each do | split | %>
    <li><%=h split.path %> (<%= link_to 'Edit', edit_profile_split_path(@profile, split) %> | <%= link_to 'Destroy', [@profile, split], :confirm => 'Are you sure?', :method => :delete %>)</li>
  <% end %>
</ul>
<h3>Add split</h3>
<% @split = @profile.splits.build %>
<%= render :partial => 'splits/form' %>
</section>
